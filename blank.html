<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogHunter</title>
    <link rel="stylesheet" href="styles.css?v=2.1">
</head>
<body class="blank">
    
<div id="form-container">
    <form action="authenticate.php" method="post">
        <h1>Connexion</h1>
        <label for="email">Email:</label><br><br>
        <input type="email" id="email" name="email" required><br><br>
        <label for="password">Mot de passe:</label><br><br>
        <input type="password" id="password" name="password" required><br><br>
        <input type="submit" value="Se connecter">
        <button type="button" id="create-account-button" class="submit-button-orange">Inscription</button>
    </form>
</div>

<script>
    const createAccountButton = document.getElementById('create-account-button');
    const formContainer = document.getElementById('form-container');
    createAccountButton.addEventListener('click', () => {
        formContainer.innerHTML = `
            <form action="register.php" method="post" enctype="multipart/form-data">
                <h1>Inscription</h1>
                <label for="firstName">Prénom:</label><br>
                <input type="text" id="firstName" name="firstName" required><br><br>
                <label for="lastName">Nom:</label><br>
                <input type="text" id="lastName" name="lastName" required><br><br>
                <label for="email">Email:</label><br>
                <input type="email" id="email" name="email" required><br><br>
                <label for="analystLevel">Niveau d'analyste:</label><br>
                <select id="analystLevel" name="analystLevel" required>
                    <option value="N1">N1</option>
                    <option value="N2">N2</option>
                    <option value="N3">N3</option>
                </select><br><br>
                <label for="avatar">Avatar:</label><br>
                <input type="file" id="avatar" name="avatar" accept="image/png, image/jpeg, image/jpg" required><br><br>
                <label for="password">Mot de passe:</label><br>
                <input type="password" id="password" name="password" required>
                <button type="button" id="show-password-button" class="password-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30">
                        <path fill="none" d="M0 0h30v30H0z"/>
                        <path d="M15 7c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 15.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-11a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5z"/>
                    </svg>
                </button><br>
                <span id="password-message"></span>
                <br><br><input type="submit" value="S'inscrire">
            `;
            const passwordInput = document.getElementById('password');
            const passwordMessage = document.getElementById('password-message');
            const showPasswordButton = document.getElementById('show-password-button');
            showPasswordButton.addEventListener('mouseover', () => {
                showPasswordButton.title = 'Afficher le mot de passe';
            });
            showPasswordButton.addEventListener('click', () => {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                } else {
                    passwordInput.type = 'password';
                }
            });
            passwordInput.addEventListener('input', () => {
                const password = passwordInput.value;
                const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                if (regex.test(password)) {
                    passwordMessage.textContent = 'Le mot de passe est valide';
                    passwordMessage.style.color = 'green';
                } else {
                    passwordMessage.textContent = 'Le mot de passe doit comporter au moins 8 caractères, dont au moins une lettre majuscule, une lettre minuscule, un chiffre et un caractère spécial';
                    passwordMessage.style.color = 'red';
                }
            });
    });
</script>